<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <title>Time-Curve Betting Simulation</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@stlite/mountable@0.58.1/build/stlite.css" />
  </head>
  <body>
    <div id="root">
      <div style="display: flex; justify-content: center; align-items: center; height: 100vh; flex-direction: column; font-family: sans-serif; color: #333;">
        <div class="spinner" style="border: 4px solid #f3f3f3; border-top: 4px solid #0071e3; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin-bottom: 20px;"></div>
        <div>Loading Simulation...</div>
        <div style="font-size: 0.8em; color: #666; margin-top: 10px;">Initializing Python Runtime (this may take a minute)</div>
      </div>
      <style>
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      </style>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/@stlite/mountable@0.58.1/build/stlite.js"></script>
    <script>
      window.onerror = function(message, source, lineno, colno, error) {
        const root = document.getElementById("root");
        root.innerHTML += '<div style="color: red; padding: 20px; background: #xffdddd; border: 1px solid red; margin: 20px; white-space: pre-wrap;"><h3>Error:</h3>' + message + '\n' + source + ':' + lineno + '</div>';
      };
      window.onunhandledrejection = function(event) {
        const root = document.getElementById("root");
        root.innerHTML += '<div style="color: red; padding: 20px; background: #xffdddd; border: 1px solid red; margin: 20px; white-space: pre-wrap;"><h3>Unhandled Rejection:</h3>' + event.reason + '</div>';
      };

      try {
        stlite.mount({
          requirements: ["streamlit", "pandas"],
          entrypoint: "app.py",
          files: {
            "app.py": `
import streamlit as st
import time

st.title("Pandas Test üêº")
st.write("Attempting to import pandas...")

try:
    import pandas as pd
    st.success(f"Pandas imported successfully! Version: {pd.__version__}")
except Exception as e:
    st.error(f"Failed to import pandas: {e}")

st.write("Test complete.")

`
          }
        });
      } catch (e) {
        const root = document.getElementById("root");
        root.innerHTML += '<div style="color: red; padding: 20px; background: #xffdddd; border: 1px solid red; margin: 20px; white-space: pre-wrap;"><h3>Mount Error:</h3>' + e + '</div>';
      }
    </script>
  </body>
</html>
